<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Login Admin Absensi SMKS Barakati</title>

<style>
  body { font-family: Arial, sans-serif; margin:20px; text-align:center; }
  h1 { margin-bottom:20px; }
  input { width:250px; padding:8px; margin:5px 0; }
  button { padding:8px 20px; margin-top:10px; }
  #loading { margin-top:10px; font-style:italic; }
</style>
</head>
<body>

<h1>Login Admin Absensi</h1>

<input type="text" id="user" placeholder="Username admin"><br>
<input type="password" id="pass" placeholder="Password admin"><br>
<button onclick="login()">LOGIN</button>

<div id="loading" style="display:none">⏳ Memuat data...</div>

<script src="admin.js"></script>

<script>
function login() {
  const user = document.getElementById("user").value.trim();
  const pass = document.getElementById("pass").value.trim();
  if(!user || !pass){ alert("❗ Username & password wajib diisi"); return; }

  document.getElementById("loading").style.display="block";

  fetch(`${API_URL}?action=login&user=${encodeURIComponent(user)}&pass=${encodeURIComponent(pass)}`)
    .then(r=>r.json())
    .then(res=>{
      document.getElementById("loading").style.display="none";
      if(res.status==="ok"){
        // simpan session sederhana
        localStorage.setItem("adminUser", user);
        window.location.href = "admin.html";
      } else {
        alert("❌ Login admin gagal");
      }
    })
    .catch(()=>{ alert("❌ Tidak dapat terhubung ke server"); document.getElementById("loading").style.display="none"; });
}
</script>

</body>
</html>
